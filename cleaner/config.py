# -*- coding: utf-8 -*-
import re

# from lama.cleaner.tags.date import date_compile
from lama.cleaner.tags.latex import latex_compile

BADS_SYMBOLS = {
    '': ['&#8482;', '&#153;', '&#8203;',
         'ˆ', '&circ;', '&#710;', '&#x2c6;',
         '∼', '&sim;', '&#8764;', '&#x223c;',
         '&shy;', '&#173;', '&#xad;',
         '&#0;', '&#x0;',
         '˜', '&tilde;', '&#732;', '&#x2dc;', ],
    ' ': [' ', '&nbsp;', '&#160;', '&#xa0;',
          ' ', '&ensp;', '&#8194;', '&#x2002;',
          ' ', '&emsp;', '&#8195;', '&#x2003;', '&#x20;',
          ' ', '&thinsp;', '&#8201;', '&#x2009;',
          '&#8239;',
          '&#8199;', '\t', '&#32;', '&#9;', ],
    '$': ['¤', '&curren;', '&#164;', '&#xa4;',
          '£', '&pound;', '&#163;', '&#xa3;',
          '¥', '&yen;', '&#165;', '&#xa5;',
          '&#8353;', '₡',
          '¢', '&cent;', '&#162;', '&#xa1;',
          '&#036;', '&#36;', '&#x24;',
          '€', '&euro;', '&#8364;', '&#x20ac;', '&#128;'],
    ':': ['&#58;', ],
    '\n': ['¶', '&para;', '&#182;', '&#xb6;', ],
    # '(C)': ['©', '&copy;', '&#169;', '&#xa9;'],
    # '(R)': ['®', '&reg;', '&#174;', '&#xae;'],
    # '(TM)': ['™', '&trade;', '&#8482;', '&#153;'],
    # '+/-': ['±', '&plusmn;', '&#177;', '&#xb1;'],
    '\)': ['&#041;', '&#41;', '&#x29;', ],
    '\(': ['&#040;', '&#40;', '&#x28;', ],
    '}': ['&#125;', ],
    '"': ['«', '&laquo;', '&#171;', '&#xab;',
          '»', '&raquo;', '&#187;', '&#xbb;',
          '“', '&ldquo;', '&#8220;', '&#x201c;',
          '”', '&rdquo;', '&#8221;', '&#x201b;',
          '"', '&quot;', '&#34;', '&#x22;', '&#034;',
          '″', '&Prime;', '&#8243;', '&#x2033;',
          '¨', '&uml;', '&#168;', '&#xa8;',
          '„', '&bdquo;', '&#8222;', '&#x201e;',
          '&#148;', '&#147;',
          '˝', ' ̏', ],
    '\'': ['′', '&prime;', '&#8242;', '&#x2032;',
           '́', '&#769;', '`',
           '´', '&acute;', '&#180;', '&#xb4;',
           '&apos;', '&#039;', '&#39;', '&#x27;',
           ' ̉', ' ̛', ' ͂',
           'ˆ', '&circ;', '&#710;',
           '’', '&rsquo;', '&#8217;', '&#x2019;',
           '‘', '&lsquo;', '&#8216;', '&#x2018;',
           '&#146;', '˘', ' ̑', 'ˇ', ],
    ',': ['‚', '&sbquo;', '&#8218;', '&#x201a;',
          '&#145;', '¸', ' ̢', ' ̡', ' ͅ', '˛',
          '&#044;', '&#44;', '&#x27;',
          '¸', '&cedil;', '&#184;', '&#xb8;', ],
    '*': ['&#042;', '&#42;', '&#x2a;',
          '×', '&times;', '&#215;', '&#xd7;',
          '§', '&sect;', '&#167;', '&#xa7;',
          '°', '&deg;', '&#176;', '&#xb0;',
          '˚',
          '•', '&bull;', '&#8226;', '&#x2022;', '&#149;',
          '∗', '&lowast;', '&#8727;', '&#x2217;',
          '♦', '&diams;', '&#9830;',
          '·', '&middot;', '&#183;', '&#xb7;',
          '&#9679;', '&#9702;',
          '⋅', '&sdot;', '&#8901;', '&#x22c5;',
          '☐', '&#9744;',
          '☑', '&#9745;',
          '☒', '&#9746;', ],
    '/': ['÷', '&divide;', '&#247;', '&#xf7;',
          '/', '&#47;', '&#8725;',
          '⁄', '&frasl;', '&#8260;', '&#x2044;', ],
    '-': ['‑', '&#8209;', '&mdash;',
          '&#045;', '&#45;', '&#x2d;',
          '¬', '&not;', '&#172;', '&#xac;',
          '¯', '&macr;', '&#175;', '&#xaf;',
          '‾', '&oline;', '&#8254;', '&#x203e;', '&#xf4;',
          '–', '&ndash;', '&#8211;', '&#x2013;',
          '—', '&mdash;', '&#8212;', '&#x2014;',
          '−', '&minus;', '&#8722;', '&#x2212;',
          '←', '&larr;', '&#8592;', '&#x2190;',
          '→', '&rarr;', '&#8594;', '&#x2192;',
          '↔', '&harr;', '&#8596;', '&#x2194;',
          '\xe2\x80\x93',
          '&#150;', '&#151;'],
    '...': ['…', '&hellip;', '&#8230;', '&#x2026;', '&#133;'],
    '#': ['№', '&#8470;',
          '&#035;', '&#35;', '&#x23;', ],
    '&': ['&amp;', '&#38;', '&#x26;',
          '&#033;', '&#33;', '&#x21;', ],
    '%': ['‰', '&permil;', '&#8240;', '&#x2030;',
          '&#038;', '&#38;', '&#x26;', ],
    ';': ['&#894;', ],
    '=': ['&#61;', '&#061;',
          '⇐', '&lArr;', '&#8656;', '&#x21d0;',
          '⇒', '&rArr;', '&#8658;', '&#x21d2;',
          '⇔', '&hArr;', '&#8660;', '&#x21d4;',
          '≅', '&cong;', '&#8773;', '&#x2245;',
          '≈', '&asymp;', '&#8776;', '&#x2248;',
          '≠', '&ne;', '&#8800;', '&#x2260;',
          '≡', '&equiv;', '&#8801;', '&#x2261;',
          '≤', '&le;', '&#8804;', '&#x2264;',
          '≥', '&ge;', '&#8805;', '&#x2265;', ],
    '<': ['<', '&lt;', '&#60;', '&#x3c;',
          '‹', '&lsaquo;', '&#8249;', '&#x2039;',
          '◄', '&#9668;',
          '〈', '&lang;', '&#9001;', '&#10216;', '&#x27e8;',
          '∠', '&ang;', '&#8736;', '&#x2220;',
          '⊂', '&sub;', '&#8834;', '&#x2282;',
          '⊄', '&nsub;', '&#8836;', '&#x2284;',
          '⊆', '&sube;', '&#8838;', '&#x2286;', ],
    '>': ['>', '&gt;', '&#62;', '&#x3e;',
          '›', '&rsaquo;', '&#8250;', '&#x203a;',
          '►', '&#9658;',
          '〉', '&rang;', '&#9002;', '&#10217;', '&#x27e9;',
          '⊃', '&sup;', '&#8835;', '&#x2283;',
          '⊇', '&supe;', '&#8839;', '&#x2287;', ],
    '\[': ['&#91;', '&#x5b;', '&#x005B;', ],
    '\]': ['&#93;', '&#x5d;', ],
    # '\\': ['\&#92;'],
    # '~': [],
    '!': ['&#033;', '&#33;', '&#x21;', ],
    '|': ['&#124;', '&#x7c;'],
    '+': ['&#043;', '&#43;', '&#x2b;', ],
    # '|': ['\xef\xa3\xb7', '\xef\xa3\xac', '\xef\xa3\xaf',
    #       '⇑', '&uArr;', '&#8657;' '&#x21d1;',
    #       '↓', '&darr;', '&#8595;', '&#x2193;',
    #       '⇓', '&dArr;', '&#8659;', '&#x21d3;',
    #       '¦', '&brvbar;', '&#166;', '&#xa6;',
    #       '∫', '&int;', '&#8747;', '&#x222b;',
    #       '⌊', '&lfloor;', '&#8970;', '&#x230a;',
    #       '⌋', '&rfloor;', '&#8971;', '&#x230b;', ]

    #       '↑', '&uarr;', '&#8593;', '&#x2191;', ],


    'A': ['À', '&Agrave;', '&#192;', '&#xc0;',
          'Á', '&Aacute;', '&#193;', '&#xc1;',
          'Â', '&Acirc;', '&#194;', '&#xc2;',
          'Ã', '&Atilde;', '&#195;', '&#xc3;',
          'Ä', '&Auml;', '&#196;', '&#xc4;',
          'Å', '&Aring;', '&#197;' '&#xc5;',
          'Æ', '&AElig;', '&#198;', '&#xc6;',
          'Α', '&Alpha;', '&#913;', '&#x391;',
          'Λ', '&Lambda;', '&#923;', '&#x39b;',
          'λ', '&lambda;', '&#955;', '&#x3bb;',
          '∧', '&and;', '&#8743;', '&#x2227;',
          '▲', '&#9650;',
          '♠', '&spades;', '&#9824;',
          '♣', '&clubs;', '&#9827;',
          'Φ', '&Phi;', '&#934;', '&#x3a6;', ],
    'B': ['ß', '&szlig;', '&#223;', '&#xdd;',
          'Β', '&Beta;', '&#914;', '&#x392;',
          'β', '&beta;', '&#946;', '&#x3b2;', ],
    'C': ['Ç', '&Ccedil;', '&#199;', '&#xc7;', ],
    'D': ['Ð', '&ETH;', '&#208;', '&#xd0;',
          'Δ', '&Delta;', '&#916;', '&#x394;', ],
    'E': ['È', '&Egrave;', '&#200;', '&#xc8;',
          'É', '&Eacute;', '&#201;', '&#xc9;',
          'Ê', '&Ecirc;', '&#202;', '&#xca;',
          'Ë', '&Euml;', '&#203;', '&#xcb;',
          'Ε', '&Epsilon;', '&#917;', '&#x395;',
          'Σ', '&Sigma;', '&#931;', '&#x3a3;',
          'ξ', '&xi;', '&#958;', '&#x3be;',
          'Œ', '&OElig;', '&#338;', '&#x152;',
          '∈', '&isin;', '&#8712;', '&#x2208;',
          '∉', '&notin;', '&#8713;', '&#x2209;',
          'Ξ', '&Xi;', '&#926;', '&#x39e;',
          '∑', '&sum;', '&#8721;', '&#x2211;', ],
    'H': ['Η', '&Eta;', '&#919;', '&#x397;', ],
    'I': ['Ì', '&Igrave;', '&#204;', '&#xcc;',
          'Í', '&Iacute;', '&#205;', '&#xcd;',
          'Î', '&Icirc;', '&#206;', '&#xce;',
          'Ï', '&Iuml;', '&#207;', '&#xcf;',
          'Ι', '&Iota;', '&#921;', '&#x399;',
          'ℑ', '&image;', '&#8465;', ],
    'K': ['Κ', '&Kappa;', '&#922;', '&#x39a;', ],
    'N': ['Ñ', '&Ntilde;', '&#209;', '&#xd1;',
          'Ν', '&Nu;', '&#925;', '&#x39d;', ],
    'O': ['Ò', '&Ograve;', '&#210;', '&#xd2;',
          'Ó', '&Oacute;', '&#211;', '&#xd3;',
          'Ô', '&Ocirc;', '&#212;', '&#xd4;',
          'Õ', '&Otilde;', '&#213;', '&#xd5;',
          'Ö', '&Ouml;', '&#214;', '&#xd6;',
          'Ŏ',
          'Ø', '&Oslash;', '&#216;', '&#xd8;',
          'Θ', '&Theta;', '&#920;', '&#x398;',
          'Ο', '&Omicron;', '&#927;', '&#x39f;',
          'Ω', '&Omega;', '&#937;', '&#x3a9;', ],
    'M': ['Μ', '&Mu;', '&#924;', '&#x39c;', ],
    'P': ['Þ', '&THORN;', '&#222;', '&#xde;',
          'Π', '&Pi;', '&#928;', '&#x3a0;',
          'Ρ', '&Rho;', '&#929;', '&#x3a1;',
          '℘', '&weierp;', '&#8472;', ],
    'Q': ['ϑ', '&thetasym;', '&#977;', '&#x3d1;', ],
    'R': ['ℜ', '&real;', '&#8476;'],
    'S': ['Š', '&Scaron;', '&#352;', '&#x160;', ],
    'T': ['Τ', '&Tau;', '&#932;', '&#x3a4;',
          '₸', '&#8376;', '&#x20B8;', '&#x201c;',
          '†', '&dagger;', '&#8224;', '&#x2020;', '&#134;',
          '⌈', '&lceil;', '&#8968;', '&#x2308;',
          'Γ', '&Gamma;', '&#915;', '&#x393;',
          '⌉', '&rceil;', '&#8969;', '&#x2309;', ],
    'U': ['Ù', '&Ugrave;', '&#217;', '&#xd9;',
          'Ú', '&Uacute;', '&#218;', '&#xda;',
          'Û', '&Ucirc;', '&#219;', '&#xdb;',
          'Ü', '&Uuml;', '&#220;', '&#xdc;',
          '∪', '&cup;', '&#8746;', '&#x222a;', ],
    'W': ['Ψ', '&Psi;', '&#936;', '&#x3a8;', ],
    'X': ['Χ', '&Chi;', '&#935;', '&#x3a7;', ],
    'Y': ['Ý', '&Yacute;', '&#221;', '&#xdd;',
          'Υ', '&Upsilon;', '&#933;',
          'Ÿ', '&Yuml;', '&#376;', '&#x178;', '&#159;', ],
    'Z': ['Ζ', '&Zeta;', '&#918;', '&#x396;', ],

    'a': ['à', '&agrave;', '&#224;', '&#xe0;',
          'á', '&aacute;', '&#225;', '&#xe1;',
          'â', '&acirc;', '&#226;', '&#xe2;',
          'ã', '&atilde;', '&#227;', '&#xe3;',
          'ä', '&auml;', '&#228;', '&#xe4;',
          'å', '&aring;', '&#229;', '&#xe5;',
          'æ', '&aelig;', '&#230;', '&#xe6;',
          'œ', '&oelig;', '&#339;', '&#x153;',
          'α', '&alpha;', '&#945;', '&#x3b1;',
          '∝', '&prop;', '&#8733;', '&#x221d;', ],
    'c': ['ç', '&ccedil;', '&#231;', '&#xe7;',
          '&#x2184;', 'ↄ',
          'ς', '&sigmaf;', '&#962;', '&#x3c2;',
          '&#263;', 'ć'],
    'd': ['ð', '&eth;', '&#240;', '&#xf0;', ],
    'e': ['è', '&egrave;', '&#232;', '&#xe8;',
          'é', '&eacute;', '&#233;', '&#xe9;',
          'ê', '&ecirc;', '&#234;', '&#xea;',
          'ë', '&euml;', '&#235;', '&#xeb;',
          'ε', '&epsilon;', '&#949;', '&#x3b5;', ],
    'f': ['ƒ', '&fnof;', '&#402;' '&#x192;', ],
    'ff': ['ﬀ'],
    'fi': ['ﬁ'],
    'ffi': ['ﬃ'],
    'i': ['ì', '&igrave;', '&#236;', '&#xec;',
          'í', '&iacute;', '&#237;' '&#xed;',
          'î', '&icirc;', '&#238;', '&#xee;',
          'ï', '&iuml;', '&#239;', '&#xef;',
          'ι', '&iota;', '&#953;', '&#x3b9;', ],
    'k': ['κ', '&kappa;', '&#954;', '&#x3ba;', ],
    'n': ['ñ', '&ntilde;', '&#241;', '&#xf1;',
          'η', '&eta;', '&#951;', '&#x3b7;',
          '∩', '&cap;', '&#8745;', '&#x2229;',
          'π', '&pi;', '&#960;', '&#x3c0;', ],
    'o': ['ò', '&ograve;', '&#242;', '&#xf2;',
          'ó', '&oacute;', '&#243;', '&#xf3;',
          'ô', '&ocirc;', '&#244;', '&#xf4;',
          'õ', '&otilde;', '&#245;', '&#xf5;',
          'ö', '&ouml;', '&#246;', '&#xf6;',
          '&#335;', 'ŏ',
          'ø', '&oslash;', '&#248;', '&#xf8;',
          'θ', '&theta;', '&#952;', '&#x3b8;',
          'ο', '&omicron;', '&#959;', '&#x3bf;',
          'σ', '&sigma;', '&#963;', '&#x3c3;',
          'δ', '&delta;', '&#948;', '&#x3b4;',
          '∅', '&empty;', '&#8709;', '&#x2205;',
          '⊕', '&oplus;', '&#8853;', '&#x2295;',
          '⊗', '&otimes;', '&#8855;', '&#x2297;',
          '&#111;', ],
    'p': ['þ', '&thorn;', '&#254;',
          'φ', '&phi;', '&#966;', '&#x3c6;',
          'ρ', '&rho;', '&#961;', '&#x3c1;', ],
    'r': ['τ', '&tau;', '&#964;', '&#x3c4;', ],
    's': ['š', '&scaron;', '&#353;', '&#x161;',
          '&#347;'],
    'u': ['ù', '&ugrave;', '&#249;', '&#xf9;',
          '&#363;', 'ū', 'Ū',
          'ú', '&uacute;', '&#250;', '&#xfa;',
          'û', '&ucirc;', '&#251;', '&#xfb;',
          'ü', '&uuml;', '&#252;', '&#xfc;',
          'μ', '&mu;', '&#956;', '&#x3bc;',
          'µ', '&micro;', '&#181;', '&#xb5;'],
    'v': ['υ', '&upsilon;', '&#965;', '&#x3c5;',
          'ν', '&nu;', '&#957;', '&#x3bd;',
          '∨', '&or;', '&#8744;', '&#x2228;',
          '▼', '&#9660;',
          '√', '&radic;', '&#8730;', '&#x221a;',
          '∇', '&nabla;', '&#8711;', '&#x2207;',
          '♥', '&hearts;', '&#9829;', ],
    'w': ['ψ', '&psi;', '&#968;', '&#x3c8;',
          'ω', '&omega;', '&#969;', '&#x3c9;', ],
    'x': ['χ', '&chi;', '&#967;', '&#x3c7;',
          '&#120;',
          'ℵ', '&alefsym;', '&#8501;', '&#x2135;', ],
    'y': ['ý', '&yacute;', '&#253;', '&#xfd;',
          'ÿ', '&yuml;', '&#255;', '&#xff;',
          'γ', '&gamma;', '&#947;', '&#x3b3;',
          'ϒ', '&upsih;', '&#978;', '&#x3d2;', ],
    'z': ['ζ', '&zeta;', '&#950;', '&#x3b6;', ],
}

for normal in BADS_SYMBOLS:
    bads = '|'.join(BADS_SYMBOLS[normal])
    BADS_SYMBOLS[normal] = re.compile(bads, flags=re.I)


TAGS = {
    # https://en.wikipedia.org/wiki/Template:Convert
    re.compile(r'\$\s*?[\d\.,]{1,}(?:\s*?(?:million|billion))?'): '{CURRENCY}',
    re.compile(r'(?:\d+/)?(?:\d+(?:[,\.]\d+)?)\s*?%'): '{PERCENT}',
    re.compile(r'\(\d+\)\s*?\d+-\d+'): '{PHONE}',
    re.compile(r'\d+:\d+\s*?(?:a|p)\s*?\.m.', flags=re.I): '{TIME}',
    re.compile(r'http[s]?://[\w\-_\.?&=#/%\+]+'): '{URL}',
    re.compile(r'[\w_\.\-]+@[\w_\-]+\.\w{2,}'): '{EMAIL}',
    # re.compile(r'\d{2}-\d{7}'): '{EMPLOEE_ID}',
    # date_compile: '{DATE}',
}

HEADERS = [
    re.compile('^[^A-Za-z]+$', flags=re.M),  # no letters in a string
    re.compile('^[^\s]+$', flags=re.M),  # one word
    re.compile('^[A-Z \d\':]+$', flags=re.M), # text in bold
    latex_compile,  # remove strings with formuls
]

SYSTEM_NOISE = [
    re.compile('\(\w+\)'),  # one word in (), like (iii)
    re.compile('\(\)|\[\]|""'),  # empty brackets
    re.compile('\[\.+\]'),  # empty brackets
    re.compile('^[#*\-:; ]+', flags=re.M), # remove list markers
]
